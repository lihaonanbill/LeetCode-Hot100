class Solution:
    def isValid(self, s: str) -> bool:
        """
        使用栈判断括号字符串是否有效。
        有效条件：
        1) 左括号必须用相同类型的右括号闭合
        2) 必须按正确顺序闭合
        3) 每个右括号必须有对应的左括号
        """
        # 右括号 -> 对应的左括号
        match = {
            ')': '(',
            ']': '[',
            '}': '{'
        }

        stack = []

        for ch in s:
            # 左括号：入栈
            if ch in "([{":
                stack.append(ch)
            else:
                # 右括号：需要匹配栈顶的左括号
                if not stack:
                    return False  # 没有左括号可匹配
                top = stack.pop()
                if top != match[ch]:
                    return False  # 类型不匹配或顺序不对

        # 最后栈必须为空，表示所有左括号都被正确闭合
        return len(stack) == 0




"""
算法思路（Stack）
括号合法的关键是后进先出：最近遇到的左括号必须最先被匹配。
遍历字符串 s：
    如果是左括号 (、[、{：压入栈
    如果是右括号 )、]、}：
        栈空：说明没有可匹配的左括号 → False
        弹出栈顶元素，看它是否是当前右括号对应的左括号，不是则 False
    遍历结束后，如果栈为空，说明全部匹配完成 → True，否则 False


时空复杂度
设 n = len(s)：
    时间复杂度：O(n)
    每个字符最多入栈/出栈一次。
    空间复杂度：O(n)（最坏情况全是左括号，例如 "((((("）
    栈最多存 n 个字符。
"""